<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Slider</title>
    <style>
        .slider {
            width: 300px;
            height: 200px;
            overflow: hidden;
            position: relative;
        }

        .slides {
            display: flex;
            transition: transform 0.5s ease;
        }

        .slide {
            flex: 0 0 100%;
            position: absolute;
            opacity: 1;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: #ccc;
            border: 2px solid #fff;
            padding: 20px;
            text-align: center;
            transition: transform 1s ease, opacity 0.1s ease 0.5s, left 0.5s;
            /* Delay opacity transition */
            /* Added transition for left property */
        }


        .slide.active {
            opacity: 1;
        }

        .slider-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            z-index: 1;
        }

        .slider-arrow {
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 5px 10px;
            border-radius: 5px;
            color: #333;
        }
    </style>
</head>

<body>

    <div class="slider">
        <div class="slider-nav">
            <div class="slider-arrow prev">Prev</div>
            <div class="slider-arrow next">Next</div>
        </div>
        <div class="slides">
            <div class="slide" style="background-color: #f8d7da;">Slide 1</div>
            <div class="slide" style="background-color: #cce5ff;">Slide 2</div>
            <div class="slide" style="background-color: #d4edda;">Slide 3</div>
        </div>
    </div>

    <script>
        class Slider {
            constructor(sliderElement) {
                this.slider = sliderElement;
                this.slides = sliderElement.querySelector('.slides');
                this.slideItems = Array.from(this.slides.querySelectorAll('.slide'));
                this.autoplayDelay = this.slider.dataset.slider ? JSON.parse(this.slider.dataset.slider).delay : 0;
                this.currentSlideIndex = 0;
                this.totalSlides = this.slideItems.length;
                this.interval = null;

                this.angleIncrement = (2 * Math.PI) / this.totalSlides;
                this.radius = 100;
                this.init();
            }

            init() {
                this.showSlide(this.currentSlideIndex);
                this.updateSlidePositions();
                this.startAutoplay();

                const prevButton = this.slider.querySelector('.prev');
                const nextButton = this.slider.querySelector('.next');

                prevButton.addEventListener('click', () => this.prevSlide());
                nextButton.addEventListener('click', () => this.nextSlide());
            }

            showSlide(index) {
                this.slideItems.forEach((slide, i) => {
                    if (i === index) {
                        slide.classList.add('active');
                        // Add a delay for opacity transition after translation transition
                        setTimeout(() => {
                            slide.style.opacity = '1'; // Set opacity to 1 after delay
                        }, 500); // Adjust the delay according to the translation transition duration
                    } else {
                        slide.classList.remove('active');
                        slide.style.opacity = '0'; // Set opacity to 0 for inactive slides
                    }
                });
            }



            nextSlide() {
                this.currentSlideIndex = (this.currentSlideIndex + 1) % this.totalSlides;
                this.showSlide(this.currentSlideIndex);
                this.updateSlidePositions();
            }

            prevSlide() {
                this.currentSlideIndex = (this.currentSlideIndex - 1 + this.totalSlides) % this.totalSlides;
                this.showSlide(this.currentSlideIndex);
                this.updateSlidePositions();
            }
            updateSlidePositions() {
                this.slideItems.forEach((slide, i) => {
                    const angle = i * this.angleIncrement;
                    const x = this.radius * Math.cos(angle);
                    const y = this.radius * Math.sin(angle);

                    // Apply transition effect
                    setTimeout(() => {
                        slide.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;

                    }, 90);
                    slide.style.transition = 'transform 0.5s ease'; // Apply transition effect

                });

                // Set the final position

            }



            startAutoplay() {
                if (this.autoplayDelay > 0) {
                    this.interval = setInterval(() => {
                        this.nextSlide();
                    }, this.autoplayDelay);
                }
            }

            stopAutoplay() {
                clearInterval(this.interval);
            }
        }

        const slider = new Slider(document.querySelector('.slider'));
    </script>

</body>

</html>